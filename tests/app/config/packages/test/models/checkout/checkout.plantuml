@startuml
allow_mixing
title checkout
skinparam titleBorderRoundCorner 15
skinparam titleBorderThickness 2
skinparam state {
    BackgroundColor<<initial>> #87b741
    BackgroundColor<<marked>> #3887C6
    BorderColor #3887C6
    BorderColor<<marked>> Black
    FontColor<<marked>> White
}
skinparam agent {
    BackgroundColor #ffffff
    BorderColor #3887C6
}
state "home" <<initial>>
state "step1"
state "step2"
state "step3"
state "step4"
state "step5"
state "step6"
state "awaitingAccount"
state "awaitingPersonalDetails"
state "awaitingBillingAddress"
state "awaitingPassword"
state "awaitingPrivacyPolicyAgreement"
state "personalDetailsFilled"
state "billingAddressFilled"
state "passwordFilled"
state "privacyPolicyAgreed"
state "awaitingExistingOrNewBilingAddress"
state "awaitingExistingOrNewDeliveryAddress"
state "awaitingDeliveryAddress"
state "awaitingDeliveryMethod"
state "awaitingPaymentMethod"
state "awaitingTermsAndConditionsAgreement"
state "paymentMethodSelected"
state "termsAndConditionsAgreed"
state "accountAdded"
state "billingDetailsAdded"
state "deliveryDetailsAdded"
state "deliveryMethodAdded"
state "paymentMethodAdded"
state "orderPlaced"
agent "addProductAndCheckoutNotLoggedIn"
agent "addProductAndCheckoutLoggedIn"
agent "updateStep1"
agent "updateStep2LoggedIn"
agent "updateStep2GuestCheckout"
agent "updateStep2RegisterAccount"
agent "login"
agent "guestCheckout"
agent "registerAccount"
agent "fillPersonalDetails"
agent "fillBillingAddress"
agent "fillPassword"
agent "agreePrivacyPolicy"
agent "useExistingBillingAddress"
agent "useNewBillingAddress"
agent "fillBillingAddressLoggedIn"
agent "continueRegisterAccountWithDifferentAddresses"
agent "continueGuestCheckoutDifferentAddresses"
agent "updateStep3"
agent "continueRegisterAccountWithSameAddresses"
agent "continueGuestCheckoutSameAddresses"
agent "updateStep3LoggedIn"
agent "updateStep3NotLoggedIn"
agent "useExistingDeliveryAddress"
agent "useNewDeliveryAddress"
agent "fillDeliveryAddressLoggedIn"
agent "addDeliveryAddress"
agent "updateStep4"
agent "selectDeliveryMethodAndContinue"
agent "updateStep5"
agent "selectPaymentMethod"
agent "agreeTermsAndConditions"
agent "continueWithPaymentMethod"
agent "confirmOrder"
agent "continueShopping"
agent "goFromStep2ToStep1"
agent "goFromStep3ToStep1"
agent "goFromStep4ToStep1"
agent "goFromStep5ToStep1"
agent "goFromStep6ToStep1"
agent "goFromStep1ToStep2"
agent "goFromStep3ToStep2"
agent "goFromStep4ToStep2"
agent "goFromStep5ToStep2"
agent "goFromStep6ToStep2"
agent "goFromStep1ToStep3"
agent "goFromStep2ToStep3"
agent "goFromStep4ToStep3"
agent "goFromStep5ToStep3"
agent "goFromStep6ToStep3"
agent "goFromStep1ToStep4"
agent "goFromStep2ToStep4"
agent "goFromStep3ToStep4"
agent "goFromStep5ToStep4"
agent "goFromStep6ToStep4"
agent "goFromStep1ToStep5"
agent "goFromStep2ToStep5"
agent "goFromStep3ToStep5"
agent "goFromStep4ToStep5"
agent "goFromStep6ToStep5"
agent "goFromStep1ToStep6"
agent "goFromStep2ToStep6"
agent "goFromStep3ToStep6"
agent "goFromStep4ToStep6"
agent "goFromStep5ToStep6"
"home" --> "addProductAndCheckoutNotLoggedIn"
"addProductAndCheckoutNotLoggedIn" --> "step1"
"home" --> "addProductAndCheckoutLoggedIn"
"addProductAndCheckoutLoggedIn" --> "step2"
"step1" --> "updateStep1"
"updateStep1" --> "awaitingAccount"
"step2" --> "updateStep2LoggedIn"
"updateStep2LoggedIn" --> "awaitingExistingOrNewBilingAddress"
"step2" --> "updateStep2GuestCheckout"
"updateStep2GuestCheckout" --> "awaitingPersonalDetails"
"updateStep2GuestCheckout" --> "awaitingBillingAddress"
"step2" --> "updateStep2RegisterAccount"
"updateStep2RegisterAccount" --> "awaitingPersonalDetails"
"updateStep2RegisterAccount" --> "awaitingBillingAddress"
"updateStep2RegisterAccount" --> "awaitingPassword"
"updateStep2RegisterAccount" --> "awaitingPrivacyPolicyAgreement"
"awaitingAccount" --> "login"
"login" --> "accountAdded"
"login" --> "step2"
"awaitingAccount" --> "guestCheckout"
"guestCheckout" --> "step2"
"awaitingAccount" --> "registerAccount"
"registerAccount" --> "step2"
"awaitingPersonalDetails" --> "fillPersonalDetails"
"fillPersonalDetails" --> "personalDetailsFilled"
"awaitingBillingAddress" --> "fillBillingAddress"
"fillBillingAddress" --> "billingAddressFilled"
"awaitingPassword" --> "fillPassword"
"fillPassword" --> "passwordFilled"
"awaitingPrivacyPolicyAgreement" --> "agreePrivacyPolicy"
"agreePrivacyPolicy" --> "privacyPolicyAgreed"
"awaitingExistingOrNewBilingAddress" --> "useExistingBillingAddress"
"useExistingBillingAddress" --> "step3"
"useExistingBillingAddress" --> "billingDetailsAdded"
"awaitingExistingOrNewBilingAddress" --> "useNewBillingAddress"
"useNewBillingAddress" --> "awaitingBillingAddress"
"awaitingBillingAddress" --> "fillBillingAddressLoggedIn"
"fillBillingAddressLoggedIn" --> "step3"
"fillBillingAddressLoggedIn" --> "billingDetailsAdded"
"personalDetailsFilled" --> "continueRegisterAccountWithDifferentAddresses"
"continueRegisterAccountWithDifferentAddresses" --> "accountAdded"
"continueRegisterAccountWithDifferentAddresses" --> "billingDetailsAdded"
"continueRegisterAccountWithDifferentAddresses" --> "step3"
"billingAddressFilled" --> "continueRegisterAccountWithDifferentAddresses"
"passwordFilled" --> "continueRegisterAccountWithDifferentAddresses"
"privacyPolicyAgreed" --> "continueRegisterAccountWithDifferentAddresses"
"personalDetailsFilled" --> "continueGuestCheckoutDifferentAddresses"
"continueGuestCheckoutDifferentAddresses" --> "accountAdded"
"continueGuestCheckoutDifferentAddresses" --> "billingDetailsAdded"
"continueGuestCheckoutDifferentAddresses" --> "awaitingDeliveryAddress"
"billingAddressFilled" --> "continueGuestCheckoutDifferentAddresses"
"step3" --> "updateStep3"
"updateStep3" --> "awaitingDeliveryAddress"
"personalDetailsFilled" --> "continueRegisterAccountWithSameAddresses"
"continueRegisterAccountWithSameAddresses" --> "accountAdded"
"continueRegisterAccountWithSameAddresses" --> "deliveryDetailsAdded"
"continueRegisterAccountWithSameAddresses" --> "step4"
"billingAddressFilled" --> "continueRegisterAccountWithSameAddresses"
"passwordFilled" --> "continueRegisterAccountWithSameAddresses"
"privacyPolicyAgreed" --> "continueRegisterAccountWithSameAddresses"
"personalDetailsFilled" --> "continueGuestCheckoutSameAddresses"
"continueGuestCheckoutSameAddresses" --> "accountAdded"
"continueGuestCheckoutSameAddresses" --> "deliveryDetailsAdded"
"continueGuestCheckoutSameAddresses" --> "step4"
"billingAddressFilled" --> "continueGuestCheckoutSameAddresses"
"step3" --> "updateStep3LoggedIn"
"updateStep3LoggedIn" --> "awaitingExistingOrNewDeliveryAddress"
"step3" --> "updateStep3NotLoggedIn"
"updateStep3NotLoggedIn" --> "awaitingDeliveryAddress"
"awaitingExistingOrNewDeliveryAddress" --> "useExistingDeliveryAddress"
"useExistingDeliveryAddress" --> "step4"
"useExistingDeliveryAddress" --> "deliveryDetailsAdded"
"awaitingExistingOrNewDeliveryAddress" --> "useNewDeliveryAddress"
"useNewDeliveryAddress" --> "awaitingDeliveryAddress"
"awaitingDeliveryAddress" --> "fillDeliveryAddressLoggedIn"
"fillDeliveryAddressLoggedIn" --> "step4"
"fillDeliveryAddressLoggedIn" --> "deliveryDetailsAdded"
"awaitingDeliveryAddress" --> "addDeliveryAddress"
"addDeliveryAddress" --> "deliveryDetailsAdded"
"addDeliveryAddress" --> "step4"
"step4" --> "updateStep4"
"updateStep4" --> "awaitingDeliveryMethod"
"awaitingDeliveryMethod" --> "selectDeliveryMethodAndContinue"
"selectDeliveryMethodAndContinue" --> "deliveryMethodAdded"
"selectDeliveryMethodAndContinue" --> "step5"
"step5" --> "updateStep5"
"updateStep5" --> "awaitingPaymentMethod"
"updateStep5" --> "awaitingTermsAndConditionsAgreement"
"awaitingPaymentMethod" --> "selectPaymentMethod"
"selectPaymentMethod" --> "paymentMethodSelected"
"awaitingTermsAndConditionsAgreement" --> "agreeTermsAndConditions"
"agreeTermsAndConditions" --> "termsAndConditionsAgreed"
"paymentMethodSelected" --> "continueWithPaymentMethod"
"continueWithPaymentMethod" --> "paymentMethodAdded"
"continueWithPaymentMethod" --> "step6"
"termsAndConditionsAgreed" --> "continueWithPaymentMethod"
"step6" --> "confirmOrder"
"confirmOrder" --> "orderPlaced"
"accountAdded" --> "confirmOrder"
"billingDetailsAdded" --> "confirmOrder"
"deliveryDetailsAdded" --> "confirmOrder"
"deliveryMethodAdded" --> "confirmOrder"
"paymentMethodAdded" --> "confirmOrder"
"orderPlaced" --> "continueShopping"
"continueShopping" --> "home"
"step2" --> "goFromStep2ToStep1"
"goFromStep2ToStep1" --> "step1"
"step3" --> "goFromStep3ToStep1"
"goFromStep3ToStep1" --> "step1"
"step4" --> "goFromStep4ToStep1"
"goFromStep4ToStep1" --> "step1"
"step5" --> "goFromStep5ToStep1"
"goFromStep5ToStep1" --> "step1"
"step6" --> "goFromStep6ToStep1"
"goFromStep6ToStep1" --> "step1"
"step1" --> "goFromStep1ToStep2"
"goFromStep1ToStep2" --> "step2"
"step3" --> "goFromStep3ToStep2"
"goFromStep3ToStep2" --> "step2"
"step4" --> "goFromStep4ToStep2"
"goFromStep4ToStep2" --> "step2"
"step5" --> "goFromStep5ToStep2"
"goFromStep5ToStep2" --> "step2"
"step6" --> "goFromStep6ToStep2"
"goFromStep6ToStep2" --> "step2"
"step1" --> "goFromStep1ToStep3"
"goFromStep1ToStep3" --> "step3"
"step2" --> "goFromStep2ToStep3"
"goFromStep2ToStep3" --> "step3"
"step4" --> "goFromStep4ToStep3"
"goFromStep4ToStep3" --> "step3"
"step5" --> "goFromStep5ToStep3"
"goFromStep5ToStep3" --> "step3"
"step6" --> "goFromStep6ToStep3"
"goFromStep6ToStep3" --> "step3"
"step1" --> "goFromStep1ToStep4"
"goFromStep1ToStep4" --> "step4"
"step2" --> "goFromStep2ToStep4"
"goFromStep2ToStep4" --> "step4"
"step3" --> "goFromStep3ToStep4"
"goFromStep3ToStep4" --> "step4"
"step5" --> "goFromStep5ToStep4"
"goFromStep5ToStep4" --> "step4"
"step6" --> "goFromStep6ToStep4"
"goFromStep6ToStep4" --> "step4"
"step1" --> "goFromStep1ToStep5"
"goFromStep1ToStep5" --> "step5"
"step2" --> "goFromStep2ToStep5"
"goFromStep2ToStep5" --> "step5"
"step3" --> "goFromStep3ToStep5"
"goFromStep3ToStep5" --> "step5"
"step4" --> "goFromStep4ToStep5"
"goFromStep4ToStep5" --> "step5"
"step6" --> "goFromStep6ToStep5"
"goFromStep6ToStep5" --> "step5"
"step1" --> "goFromStep1ToStep6"
"goFromStep1ToStep6" --> "step6"
"step2" --> "goFromStep2ToStep6"
"goFromStep2ToStep6" --> "step6"
"step3" --> "goFromStep3ToStep6"
"goFromStep3ToStep6" --> "step6"
"step4" --> "goFromStep4ToStep6"
"goFromStep4ToStep6" --> "step6"
"step5" --> "goFromStep5ToStep6"
"goFromStep5ToStep6" --> "step6"
@enduml
