@startuml
allow_mixing
title checkout
skinparam titleBorderRoundCorner 15
skinparam titleBorderThickness 2
skinparam state {
    BackgroundColor<<initial>> #87b741
    BackgroundColor<<marked>> #3887C6
    BorderColor #3887C6
    BorderColor<<marked>> Black
    FontColor<<marked>> White
}
skinparam agent {
    BackgroundColor #ffffff
    BorderColor #3887C6
}
state "home" <<initial>>
state "step1"
state "step2"
state "step3"
state "step4"
state "step5"
state "step6"
state "awaitingAccount"
state "awaitingPersonalDetails"
state "awaitingBillingAddress"
state "awaitingPassword"
state "awaitingPrivacyPolicyAgreement"
state "personalDetailsFilled"
state "billingAddressFilled"
state "passwordFilled"
state "privacyPolicyAgreed"
state "awaitingExistingOrNewBilingAddress"
state "awaitingExistingOrNewDeliveryAddress"
state "awaitingDeliveryAddress"
state "awaitingDeliveryMethod"
state "awaitingPaymentMethod"
state "awaitingTermsAndConditionsAgreement"
state "paymentMethodSelected"
state "termsAndConditionsAgreed"
state "awaitingOrderConfirmation"
state "accountAdded"
state "billingDetailsAdded"
state "deliveryDetailsAdded"
state "deliveryMethodAdded"
state "paymentMethodAdded"
state "orderPlaced"
agent "addProductAndCheckoutNotLoggedIn"
agent "addProductAndCheckoutLoggedIn"
agent "updateStep1"
agent "updateStep2LoggedIn"
agent "updateStep2GuestCheckout"
agent "updateStep2RegisterAccount"
agent "login"
agent "guestCheckout"
agent "registerAccount"
agent "fillPersonalDetails"
agent "fillBillingAddress"
agent "fillPassword"
agent "agreePrivacyPolicy"
agent "useExistingBillingAddress"
agent "useNewBillingAddress"
agent "fillBillingAddressLoggedIn"
agent "continueRegisterAccountWithDifferentAddresses"
agent "continueGuestCheckoutDifferentAddresses"
agent "updateStep3"
agent "continueRegisterAccountWithSameAddresses"
agent "continueGuestCheckoutSameAddresses"
agent "updateStep3LoggedIn"
agent "updateStep3NotLoggedIn"
agent "useExistingDeliveryAddress"
agent "useNewDeliveryAddress"
agent "fillDeliveryAddressLoggedIn"
agent "addDeliveryAddress"
agent "updateStep4"
agent "selectDeliveryMethodAndContinue"
agent "updateStep5"
agent "selectPaymentMethod"
agent "agreeTermsAndConditions"
agent "continueWithPaymentMethod"
agent "confirmOrder"
agent "continueShopping"
agent "goToStep1FromStep2"
agent "goToStep1FromStep3"
agent "goToStep1FromStep4"
agent "goToStep1FromStep5"
agent "goToStep1FromStep6"
agent "goToStep2FromStep1"
agent "goToStep2FromStep3"
agent "goToStep2FromStep4"
agent "goToStep2FromStep5"
agent "goToStep2FromStep6"
agent "goToStep3FromStep1"
agent "goToStep3FromStep2"
agent "goToStep3FromStep4"
agent "goToStep3FromStep5"
agent "goToStep3FromStep6"
agent "goToStep4FromStep1"
agent "goToStep4FromStep2"
agent "goToStep4FromStep3"
agent "goToStep4FromStep5"
agent "goToStep4FromStep6"
agent "goToStep5FromStep1"
agent "goToStep5FromStep2"
agent "goToStep5FromStep3"
agent "goToStep5FromStep4"
agent "goToStep5FromStep6"
agent "goToStep6FromStep1"
agent "goToStep6FromStep2"
agent "goToStep6FromStep3"
agent "goToStep6FromStep4"
agent "goToStep6FromStep5"
"home" --> "addProductAndCheckoutNotLoggedIn"
"addProductAndCheckoutNotLoggedIn" --> "step1"
"home" --> "addProductAndCheckoutLoggedIn"
"addProductAndCheckoutLoggedIn" --> "step2"
"step1" --> "updateStep1"
"updateStep1" --> "awaitingAccount"
"step2" --> "updateStep2LoggedIn"
"updateStep2LoggedIn" --> "awaitingExistingOrNewBilingAddress"
"step2" --> "updateStep2GuestCheckout"
"updateStep2GuestCheckout" --> "awaitingPersonalDetails"
"updateStep2GuestCheckout" --> "awaitingBillingAddress"
"step2" --> "updateStep2RegisterAccount"
"updateStep2RegisterAccount" --> "awaitingPersonalDetails"
"updateStep2RegisterAccount" --> "awaitingBillingAddress"
"updateStep2RegisterAccount" --> "awaitingPassword"
"updateStep2RegisterAccount" --> "awaitingPrivacyPolicyAgreement"
"awaitingAccount" --> "login"
"login" --> "accountAdded"
"login" --> "step2"
"awaitingAccount" --> "guestCheckout"
"guestCheckout" --> "step2"
"awaitingAccount" --> "registerAccount"
"registerAccount" --> "step2"
"awaitingPersonalDetails" --> "fillPersonalDetails"
"fillPersonalDetails" --> "personalDetailsFilled"
"awaitingBillingAddress" --> "fillBillingAddress"
"fillBillingAddress" --> "billingAddressFilled"
"awaitingPassword" --> "fillPassword"
"fillPassword" --> "passwordFilled"
"awaitingPrivacyPolicyAgreement" --> "agreePrivacyPolicy"
"agreePrivacyPolicy" --> "privacyPolicyAgreed"
"awaitingExistingOrNewBilingAddress" --> "useExistingBillingAddress"
"useExistingBillingAddress" --> "step3"
"useExistingBillingAddress" --> "billingDetailsAdded"
"awaitingExistingOrNewBilingAddress" --> "useNewBillingAddress"
"useNewBillingAddress" --> "awaitingBillingAddress"
"awaitingBillingAddress" --> "fillBillingAddressLoggedIn"
"fillBillingAddressLoggedIn" --> "step3"
"fillBillingAddressLoggedIn" --> "billingDetailsAdded"
"personalDetailsFilled" --> "continueRegisterAccountWithDifferentAddresses"
"continueRegisterAccountWithDifferentAddresses" --> "accountAdded"
"continueRegisterAccountWithDifferentAddresses" --> "billingDetailsAdded"
"continueRegisterAccountWithDifferentAddresses" --> "step3"
"billingAddressFilled" --> "continueRegisterAccountWithDifferentAddresses"
"passwordFilled" --> "continueRegisterAccountWithDifferentAddresses"
"privacyPolicyAgreed" --> "continueRegisterAccountWithDifferentAddresses"
"personalDetailsFilled" --> "continueGuestCheckoutDifferentAddresses"
"continueGuestCheckoutDifferentAddresses" --> "accountAdded"
"continueGuestCheckoutDifferentAddresses" --> "billingDetailsAdded"
"continueGuestCheckoutDifferentAddresses" --> "awaitingDeliveryAddress"
"billingAddressFilled" --> "continueGuestCheckoutDifferentAddresses"
"step3" --> "updateStep3"
"updateStep3" --> "awaitingDeliveryAddress"
"personalDetailsFilled" --> "continueRegisterAccountWithSameAddresses"
"continueRegisterAccountWithSameAddresses" --> "accountAdded"
"continueRegisterAccountWithSameAddresses" --> "deliveryDetailsAdded"
"continueRegisterAccountWithSameAddresses" --> "step4"
"billingAddressFilled" --> "continueRegisterAccountWithSameAddresses"
"passwordFilled" --> "continueRegisterAccountWithSameAddresses"
"privacyPolicyAgreed" --> "continueRegisterAccountWithSameAddresses"
"personalDetailsFilled" --> "continueGuestCheckoutSameAddresses"
"continueGuestCheckoutSameAddresses" --> "accountAdded"
"continueGuestCheckoutSameAddresses" --> "deliveryDetailsAdded"
"continueGuestCheckoutSameAddresses" --> "step4"
"billingAddressFilled" --> "continueGuestCheckoutSameAddresses"
"step4" --> "updateStep3LoggedIn"
"updateStep3LoggedIn" --> "awaitingExistingOrNewDeliveryAddress"
"step4" --> "updateStep3NotLoggedIn"
"updateStep3NotLoggedIn" --> "awaitingDeliveryAddress"
"awaitingExistingOrNewDeliveryAddress" --> "useExistingDeliveryAddress"
"useExistingDeliveryAddress" --> "step3"
"useExistingDeliveryAddress" --> "deliveryDetailsAdded"
"awaitingExistingOrNewDeliveryAddress" --> "useNewDeliveryAddress"
"useNewDeliveryAddress" --> "awaitingDeliveryAddress"
"awaitingDeliveryAddress" --> "fillDeliveryAddressLoggedIn"
"fillDeliveryAddressLoggedIn" --> "step4"
"fillDeliveryAddressLoggedIn" --> "deliveryDetailsAdded"
"awaitingDeliveryAddress" --> "addDeliveryAddress"
"addDeliveryAddress" --> "deliveryDetailsAdded"
"addDeliveryAddress" --> "step4"
"step4" --> "updateStep4"
"updateStep4" --> "awaitingDeliveryMethod"
"awaitingDeliveryMethod" --> "selectDeliveryMethodAndContinue"
"selectDeliveryMethodAndContinue" --> "deliveryMethodAdded"
"selectDeliveryMethodAndContinue" --> "step5"
"step5" --> "updateStep5"
"updateStep5" --> "awaitingPaymentMethod"
"updateStep5" --> "awaitingTermsAndConditionsAgreement"
"awaitingPaymentMethod" --> "selectPaymentMethod"
"selectPaymentMethod" --> "paymentMethodSelected"
"awaitingTermsAndConditionsAgreement" --> "agreeTermsAndConditions"
"agreeTermsAndConditions" --> "termsAndConditionsAgreed"
"paymentMethodSelected" --> "continueWithPaymentMethod"
"continueWithPaymentMethod" --> "paymentMethodAdded"
"continueWithPaymentMethod" --> "step6"
"termsAndConditionsAgreed" --> "continueWithPaymentMethod"
"step6" --> "confirmOrder"
"confirmOrder" --> "orderPlaced"
"accountAdded" --> "confirmOrder"
"billingDetailsAdded" --> "confirmOrder"
"deliveryDetailsAdded" --> "confirmOrder"
"deliveryMethodAdded" --> "confirmOrder"
"paymentMethodAdded" --> "confirmOrder"
"orderPlaced" --> "continueShopping"
"continueShopping" --> "home"
"step2" --> "goToStep1FromStep2"
"goToStep1FromStep2" --> "step1"
"step3" --> "goToStep1FromStep3"
"goToStep1FromStep3" --> "step1"
"step4" --> "goToStep1FromStep4"
"goToStep1FromStep4" --> "step1"
"step5" --> "goToStep1FromStep5"
"goToStep1FromStep5" --> "step1"
"step6" --> "goToStep1FromStep6"
"goToStep1FromStep6" --> "step1"
"step1" --> "goToStep2FromStep1"
"goToStep2FromStep1" --> "step2"
"step3" --> "goToStep2FromStep3"
"goToStep2FromStep3" --> "step2"
"step4" --> "goToStep2FromStep4"
"goToStep2FromStep4" --> "step2"
"step5" --> "goToStep2FromStep5"
"goToStep2FromStep5" --> "step2"
"step6" --> "goToStep2FromStep6"
"goToStep2FromStep6" --> "step2"
"step1" --> "goToStep3FromStep1"
"goToStep3FromStep1" --> "step3"
"step2" --> "goToStep3FromStep2"
"goToStep3FromStep2" --> "step3"
"step4" --> "goToStep3FromStep4"
"goToStep3FromStep4" --> "step3"
"step5" --> "goToStep3FromStep5"
"goToStep3FromStep5" --> "step3"
"step6" --> "goToStep3FromStep6"
"goToStep3FromStep6" --> "step3"
"step1" --> "goToStep4FromStep1"
"goToStep4FromStep1" --> "step4"
"step2" --> "goToStep4FromStep2"
"goToStep4FromStep2" --> "step4"
"step3" --> "goToStep4FromStep3"
"goToStep4FromStep3" --> "step4"
"step5" --> "goToStep4FromStep5"
"goToStep4FromStep5" --> "step4"
"step6" --> "goToStep4FromStep6"
"goToStep4FromStep6" --> "step4"
"step1" --> "goToStep5FromStep1"
"goToStep5FromStep1" --> "step5"
"step2" --> "goToStep5FromStep2"
"goToStep5FromStep2" --> "step5"
"step3" --> "goToStep5FromStep3"
"goToStep5FromStep3" --> "step5"
"step4" --> "goToStep5FromStep4"
"goToStep5FromStep4" --> "step5"
"step6" --> "goToStep5FromStep6"
"goToStep5FromStep6" --> "step5"
"step1" --> "goToStep6FromStep1"
"goToStep6FromStep1" --> "step6"
"step2" --> "goToStep6FromStep2"
"goToStep6FromStep2" --> "step6"
"step3" --> "goToStep6FromStep3"
"goToStep6FromStep3" --> "step6"
"step4" --> "goToStep6FromStep4"
"goToStep6FromStep4" --> "step6"
"step5" --> "goToStep6FromStep5"
"goToStep6FromStep5" --> "step6"
@enduml
